<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings</title>
    <link rel="stylesheet" href="./dashboard.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-storage.js"></script>
</head>
<body>
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyDM-eb59jGlGhnVemC6t2Dwg9Zztey8HJM",
            authDomain: "enssa---knust.firebaseapp.com",
            databaseURL: "https://enssa---knust-default-rtdb.firebaseio.com",
            projectId: "enssa---knust",
            storageBucket: "enssa---knust.appspot.com",
            messagingSenderId: "920074160023",
            appId: "1:920074160023:web:b689d327d39ad9a89426d2"
  };
  
  firebase.initializeApp(firebaseConfig);
  firebase.auth.Auth.Persistence.LOCAL;
    </script>
    <!--   Firebase App Default    -->


<div id="infoUser">

</div>

    
    <script>
        var user = firebase.auth().currentUser;
        var dbBlogs = firebase.database().ref().child("USERS").orderByChild("uid").equalTo(user.uid);
    dbBlogs.on("value", function(info){
        if (info.exists()){
            var blogsHtml = "";
            info.forEach(function(singleBlog){
                blogsHtml += "<div class='accbox'>";
                    blogsHtml += "<div><img style= 'width:200px; height: 200px;' src= '";
                        blogsHtml += singleBlog.val().URL;
                    blogsHtml += "'></div><br>";

                    blogsHtml += "<div>";
                        blogsHtml += "<div><h2>"
                                    + singleBlog.val().Fullname
                                    + "</h2></div>"
                    blogsHtml += "</div>";
-
                    blogsHtml += "<div>";
                        blogsHtml += "<div><h3>"
                                    + "Year: " + singleBlog.val().Phone + "<br>"
                                    + "Student Number: " + singleBlog.val().referencenumber
                                    + "</h3></div>"
                    blogsHtml += "</div>";

                    blogsHtml += "<div class= 'accbio'><h3>";
                        blogsHtml += singleBlog.val().Gender;
                    blogsHtml += "</h3></div>";

                    blogsHtml += "<div><button class= 'accbtn' onclick= 'logout()'>";
                        blogsHtml += "LogOut";
                    blogsHtml += "</button></div>";
                
                $("#infoUser").html(blogsHtml);
            });

            
        }
    });









    
    function logout(){
        firebase.auth().signOut().then(function() {
        // Sign-out successful.
        console.log("Sign Out sucessfull");
        }).catch(function(error) {
        // An error happened.
        console.log("Error occurred.");
        });
    };
</script>
</body>
</html>